{"version":3,"sources":["../../app/scripts/app.run.js"],"names":[],"mappings":"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","file":"app.run.js","sourcesContent":["/* jshint -W097 */\r\n/* globals angular, $, Mentoring*/\r\n'use strict';\r\n/* globals angular */\r\nangular.module('mentoringApp').run(\r\n\tfunction ($rootScope, $window, $state, $translate, Auth, Principal, Language, AuditService, ENV, VERSION) {\r\n\t$rootScope.ENV = ENV;\r\n\t$rootScope.VERSION = VERSION;\r\n\r\n\t$rootScope.$on('$stateChangeStart', (event, toState, toStateParams) => {\r\n\t\t$rootScope.toState = toState;\r\n\t\t$rootScope.toStateParams = toStateParams;\r\n\r\n\t\tif ($state.current.name !== \"\" && $state.current.name !== \"login\"\r\n\t\t\t&& Principal.isIdentityResolved()) {\r\n\t\t\t\tAuth.authorize();\r\n\t\t}\r\n\t\t// Update the language\r\n\t\tLanguage.getCurrent().then(function (language) {\r\n\t\t\t$translate.use(language);\r\n\t\t});\r\n\t});\r\n\r\n\t$rootScope.$on('$stateChangeSuccess', (event, toState, toParams, fromState, fromParams) => {\r\n\t\tvar titleKey = 'global.title';\r\n\t\t$rootScope.previousStateName = fromState.name;\r\n\t\t$rootScope.previousStateParams = fromParams;\r\n\t\t\r\n\t\t// If we aren't on Login state, audit the current state\r\n\t\tif(toState.name!=='login') {\r\n\t\t\tAuditService.audit({type: 'State-Change', element: toState.url});\r\n\t\t}\r\n\t\t$translate(titleKey).then((title) => {\r\n\t\t\t// Change window title with translated one\r\n\t\t\t$window.document.title = title;\r\n\t\t});\r\n\t});\r\n\r\n\t$rootScope.$on('$viewContentLoaded', () => {\r\n\t\t// Check show header\r\n\t\tif ($state.current.name !== '' && $state.current.name !== 'login' && $state.current.name !== 'logout') {\r\n\t\t\tPrincipal.identity().then((account) => {\r\n\t\t\t\tif(account) {\r\n\t\t\t\t\t// First, config Audit Logging\r\n\t\t\t\t\t// By using MutationObserver, we will add events to all the new elements that will appear on the page.\r\n\t\t\t\t\t// This is mandatory because ngIf elements aren't on the DOM until their boolean condition is true,\r\n\t\t\t\t\t// so if we look for them before the true condition, they will not be found.\r\n\t\t\t\t\tvar target = document.querySelector('#content');\r\n\t\t\t\t\tif(window.MutationObserver) {\r\n\t\t\t\t\t\tlet observer = new MutationObserver((mutations) => {\r\n\t\t\t\t\t\t\tlet auditElement = false;\r\n\t\t\t\t\t\t\tmutations.forEach((mutation) => {\r\n\t\t\t\t\t\t\t\tangular.forEach(mutation.addedNodes, (node) => {\r\n\t\t\t\t\t\t\t\t\tif(!auditElement) {\r\n\t\t\t\t\t\t\t\t\t\tlet nodeElement =  $(node);\r\n\t\t\t\t\t\t\t\t\t\tauditElement = nodeElement.find('a, select, button').length>0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif(auditElement) {\r\n\t\t\t\t\t\t\t\thandleAuditEvents();\r\n\t\t\t\t\t\t\t}    \r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet config = {childList: true, subtree: true};\r\n\t\t\t\t\t\tobserver.observe(target, config);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\thandleAuditEvents();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$rootScope.account = account;\r\n\t\t\t\t\t$rootScope.bodylayout = 'vass';\r\n\t\t\t\t\tif (!Mentoring.isUndefinedOrNull(account) && !Mentoring.isUndefinedOrNull(account.organization)) {\r\n\t\t\t\t\t\tif (account.organization === 'Serbatic') {\r\n\t\t\t\t\t\t\t$rootScope.bodylayout = 'serbatic';\r\n\t\t\t\t\t\t} else if (account.organization === 'VASSDigital') {\r\n\t\t\t\t\t\t\t$rootScope.bodylayout = 'vassdigital';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$rootScope.isAuthenticated = Principal.isAuthenticated();\r\n\t\t\t\t\t$rootScope.isLeader = account.isLeader == 1 ? true : false;\r\n\t\t\t\t\t$rootScope.roleAdmin = Principal.isInRole('ROLE_ADMIN');\r\n\t\t\t\t\t$rootScope.roleRRHH = Principal.isInRole('ROLE_RRHH') || Principal.isInRole('ROLE_ADMIN') || Principal.isInRole('ROLE_DIRECTORG');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t$rootScope.back = () => {\r\n\t\t// If previous state is 'activate' or do not exist go to 'home'\r\n\t\tif ($rootScope.previousStateName === 'authenticate' || $state.get($rootScope.previousStateName) === null) {\r\n\t\t\t$state.go('main');\r\n\t\t} else {\r\n\t\t\t$state.go($rootScope.previousStateName, $rootScope.previousStateParams);\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Handles audit events\r\n\tvar handleAuditEvents = () => {\r\n\t\tlet content = $('#content');\r\n\t\t// First unbind the events, in case there had been a reload, and the bind them again\t\r\n\t\tcontent.find('form button[type=\"submit\"]').unbind('click.submit').bind('click.submit', (ev) => {\r\n\t\t\t$(ev.target).parents('form').addClass('ng-sent');\r\n\t\t});\r\n\t\tcontent.find('a').unbind('click.webaudit').bind('click.webaudit', (event) => {\r\n\t\t\tAuditService.audit({location: $state.$current.url.source, type: 'Click', element: event.target.toString()});\r\n\t\t});\r\n\t\tcontent.find('button').unbind('click.webaudit').bind('click.webaudit', (event) => {\r\n\t\t\tlet target = event.target;\r\n\t\t\tlet ngClick = target.attributes['ng-click'] != null ? target.attributes['ng-click'] : target.attributes['data-ng-click'];\r\n\t\t\tlet msg = ngClick != undefined ? ngClick.value : 'Default Click';\r\n\t\t\tAuditService.audit({location: $state.$current.url.source, type: 'Click', element: event.target.toString(), msg: msg});\r\n\t\t});\r\n\t\tcontent.find('select').unbind('change.webaudit').bind('change.webaudit', (event) => {\r\n\t\t\tlet target = event.target;\r\n\t\t\tlet ngModel = target.attributes['ng-model'] != null ? target.attributes['ng-model'] : target.attributes['data-ng-model'];\r\n\t\t\tlet selection = ngModel != undefined ? ngModel.value + '=' : 'Selection: '\r\n\t\t\tAuditService.audit({location: $state.$current.url.source, type: 'Change', element: event.target.toString(), msg: selection + event.target.value});\r\n\t\t});\r\n\t}\r\n});"]}