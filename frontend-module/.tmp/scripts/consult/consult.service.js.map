{"version":3,"sources":["../../../app/scripts/consult/consult.service.js"],"names":[],"mappings":"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","file":"consult.service.js","sourcesContent":["/* jshint -W097 */\r\n/* globals angular, $, Mentoring*/\r\n'use strict';\r\nangular.module('mentoringApp').factory('EmpleadosCn', function ($resource) {\r\n\treturn $resource('api/employee/:id', {}, \r\n        {query: { method: 'GET', isArray: true },\r\n        getEmployeeInfo: {isArray:false},\r\n\t\tget: {\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttransformResponse: function transformResponse(data) {\r\n\t\t\t\tdata = angular.fromJson(data);\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdate: { method: 'PUT' }});\r\n})\r\n.factory('EmployeesDirector', function ($resource) {\r\n\treturn $resource('api/employeesDirector/:directionId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('AnswersResource', function ($resource) {\r\n\treturn $resource('api/answerss/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('CompetencesResource', function ($resource) {\r\n\treturn $resource('api/competences/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EmployeeEvaluableIdResource', function ($resource) {\r\n\treturn $resource('api/employeeEvaluable/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EmployeeLeaderResource', function ($resource) {\r\n\treturn $resource('api/employeeLeader/', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EmployeeIsLeaderResource', function ($resource) {\r\n\treturn $resource('api/isleader/:employeeId', {}, Mentoring.resourceHandlerGETNoTransform);\r\n})\r\n.factory('EmployeeEvaluationResource', function ($resource) {\r\n\treturn $resource('api/evaluation/:employeeId', {},\r\n        {query: { method: 'GET', isArray: true },\r\n        getEvaluation: {url:'api/evaluation/:employeeId/:evaluationId', isArray:false},\r\n\t\tget: {\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttransformResponse: function transformResponse(data) {\r\n\t\t\t\tdata = angular.fromJson(data);\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdate: { method: 'PUT' }});\r\n})\r\n.factory('EvaluationEmployeeLeaderResource', function ($resource) {\r\n\treturn $resource('api/evaluationEmpLea/:employeeId/:leaderId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('PillarsResource', function ($resource) {\r\n\treturn $resource('api/pillars/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('QuestionsResource', function ($resource) {\r\n\treturn $resource('api/questionss/:id', {}, {\r\n\t\tquery: { method: 'GET', isArray: true },\r\n\t\tget: {\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttransformResponse: function (data) {\r\n\t\t\t\tdata = angular.fromJson(data);\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdate: { method: 'PUT' }\r\n\t});\r\n})\r\n.factory('StatesResource', function ($resource) {\r\n\treturn $resource('api/statess/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EvaluationsAllEmployees', function ($resource) {\r\n\treturn $resource('api/allEvaluations/:employeeId/', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EvaluationsCn', function ($resource) {\r\n\treturn $resource('api/autoevaluation/:employeeId/:leaderId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EvaluationsMandoCn', function ($resource) {\r\n\treturn $resource('api/evaluationLeader/:leaderId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EvaluationsConsultLeader', function ($resource) {\r\n\treturn $resource('api/allocationLeaderDate/:leaderId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EmployeesDIRECTOR', function ($resource) {\r\n\treturn $resource('api/employeesDirector/:directionId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('LeadersDIRECTOR', function ($resource) {\r\n\treturn $resource('api/leadersDirector/:directionId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EmployeesGERENTE', function ($resource) {\r\n\treturn $resource('api/employeesGerente/:managerId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('LeadersGERENTE', function ($resource) {\r\n\treturn $resource('api/leadersGerente/:managerId', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('EmployeesRRHH', function ($resource) {\r\n\treturn $resource('api/employeesRrhh/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('LeadersRRHH', function ($resource) {\r\n\treturn $resource('api/leadersRrhh/:id', {}, Mentoring.resourceHandler);\r\n})\r\n.factory('IsModificableService', function () {\r\n\treturn {\r\n\t\tmodificable: function (account, evaluation, currentYear, IsAutoEvaluationDate, IsFinalDate, roleRRHH, roleDIRECTORG, roleADMIN) {\r\n\t\t\t/// If the current employee is the same as the evaluation's employee.. \r\n\t\t\tif (account.employeeId === evaluation.employeeId) {\r\n\t\t\t\tlet date = new Date(evaluation.creationDate);\r\n\t\t\t\t// Can only modify its autoevaluation if it's auto evaluation period and the autoevaluation its of the current year\r\n\t\t\t\tif (IsAutoEvaluationDate && evaluation.evaluationType === 'auto' && currentYear === date.getFullYear()) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t// If it's final evaluation or the evaluation is final, he/she cannot modify any\r\n\t\t\t\t} else if (IsFinalDate || evaluation.evaluationType === 'final') {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t\t\r\n\t\t\t} else if (roleADMIN || roleDIRECTORG || roleRRHH) {\r\n\t\t\t\treturn true;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t// First, check if the evaluation's year is the same as the current evaluation year\r\n\t\t\t\tlet evalDate = new Date(evaluation.creationDate);\r\n\t\t\t\tlet evalYear = evalDate.getFullYear();\r\n\t\t\t\tif (evalYear !== currentYear) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t\t\r\n\t\t\t\t// Otherwise, do the usual process\r\n\t\t\t\t} else if (IsAutoEvaluationDate && evaluation.evaluationType == \"auto\") {\r\n\t\t\t\t\treturn evaluation.employeeId == account.employeeId;\r\n\t\t\t\t} else if (IsFinalDate && evaluation.evaluationType == \"final\") {\r\n\t\t\t\t\treturn account.employeeId == evaluation.leaderId;\r\n\t\t\t\t} else if (evaluation.evaluationType == \"eval\" && !IsFinalDate) {\r\n\t\t\t\t\t// no modificable en periodo final\r\n\t\t\t\t\treturn account.employeeId == evaluation.leaderId;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});"]}