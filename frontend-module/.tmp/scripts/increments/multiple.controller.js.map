{"version":3,"sources":["../../../app/scripts/increments/multiple.controller.js"],"names":[],"mappings":"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","file":"multiple.controller.js","sourcesContent":["/* jshint -W097 */\n/* Controller for Multiple Matrix funcionality */\n'use strict';\n/*@ngInject*/\nfunction MultipleController($rootScope, $window, $filter, EmployeesCategoryByYear, EmployeeMultiple, Directions, Areas) {\n    var vm = this;\n    $rootScope.activeOption = 'increments';\n    vm.direction = '';\n    vm.area = '';\n    vm.year;\n    vm.confirmedServer = false;\n    vm.showTables = false;\n    vm.listDate = [];\n    vm.confirmedList = [];\n\n    var dateFinal = new Date();\n    for (var i = 2015; i <= dateFinal.getFullYear(); i++) {\n        vm.listDate.push(i);\n    }\n\n    /* Obtains the directions */\n    Directions.query({}, (result) => {\n        vm.directions = result;\n    });\n\n    /* Function executed when a value change has happened on Direction Combo */\n    vm.changeDirectionCombo = () => {\n        if (vm.direction !== '') {\n            vm.areas = [];\n            /* Obtains the direction areas */\n            Areas.getDirectionAreas({ directionId: vm.direction.id }, (res) => {\n                vm.areas = res;\n            }, (err) => {\n                errorHandler(err.data.msg);\n            });\n        };\n    };\n\n    /* Function that calls to the server to obtain the data */\n    vm.searchIncreases = () => {\n        /* If no direction nor year are selected, show error modal */\n        if (Mentoring.isEmpty(vm.direction) || Mentoring.isUndefinedOrNull(vm.year)) {\n            vm.Modal = {\n                msg: 'increments.multiple.modal.error.search',\n                title: 'increments.multiple.modal.error.title',\n                button: 'increments.multiple.modal.ok',\n                action: () => {\n                    $('#myModal').modal('hide');\n                }\n            };\n            /* Now show the modal */\n            $('#myModal').modal('show');\n            return;\n        }\n\n        /* Else, search for increases */\n        $('#pleaseWaitDialog').modal({ backdrop: 'static', show: true });\n        vm.showTables = false;\n        vm.confirmedServer = false;\n        let obj = {\n            directionId: vm.direction.id,\n            areaId: vm.area,\n            year: vm.year,\n            confirmed: vm.confirmed\n        }\n        EmployeeMultiple.getMultipleData(obj, (result) => {\n            vm.showTables = true;\n            vm.employeesInfo = result;\n            // Iterate over the response, to know if any result it's a confirmed increase.\n            result.filter((i) => {\n                if (i.confirmed === true) {\n                    vm.confirmedServer = true;\n                    // Format the increases to something bonny\n                    i.customSalaryIncrease = $filter('NumericFilter')(i.customSalaryIncrease, 2);\n                    i.customSalaryIncreasePercent = $filter('NumericFilter')(i.customSalaryIncreasePercent, 2);\n                }\n            });\n            $('#pleaseWaitDialog').modal('hide');\n        }, (err) => {\n            $('#pleaseWaitDialog').modal('hide');\n            errorHandler(err.data.msg);\n        });\n    };\n\n    /* Handles the change of percent values on the table inputs */\n    vm.changeValuePercent = (obj) => {\n        let actualIncome = parseFloat(obj.actualIncome);\n        let customSalaryIncreasePercent = parseFloat(obj.customSalaryIncreasePercent);\n        let fixedIncrease = parseFloat(obj.salaryIncreasePercent) + customSalaryIncreasePercent;\n\n        /* Checks if the increment is a number */\n        if (isNaN(fixedIncrease)) {\n            customSalaryIncreasePercent = 0.0;\n            fixedIncrease = 0.0;\n            errorHandler('increments.multiple.modal.error.percent.nan');\n        }\n\n        /* Calculates the values */\n        let customSalaryIncrease = (actualIncome * customSalaryIncreasePercent) / 100;\n        let finalSalaryIncrease = (actualIncome * fixedIncrease) / 100;\n        let finalIncome = actualIncome + finalSalaryIncrease;\n\n        /* Assigns the formatted values */\n        obj.customSalaryIncrease = $filter('NumericFilter')(customSalaryIncrease, 2);\n        obj.customSalaryIncreasePercent = $filter('NumericFilter')(customSalaryIncreasePercent, 2);\n        obj.finalSalaryIncreasePercent = fixedIncrease;\n        obj.finalSalaryIncrease = finalSalaryIncrease;\n        obj.finalIncome = finalIncome;\n    };\n\n    /* Handles the change of a numeric vlaue on the inputs table */\n    vm.changeValueNumeric = (obj) => {\n        /* Obtains the obj values */\n        let actualIncome = parseFloat(obj.actualIncome);\n        let customIncrease = parseFloat(obj.customSalaryIncrease);\n        /* Calculates the custom increase */\n        let customIncreasePercent = (customIncrease * 100) / actualIncome;\n        /* Calcualtes the final increase percent. P-increment+User Defined. */\n        let finalSalaryPercent = parseFloat(obj.salaryIncreasePercent) + customIncreasePercent;\n\n        /* Checks if the increment is a number */\n        if (isNaN(customIncrease)) {\n            customIncrease = 0.0;\n            customIncreasePercent = 0.0;\n            finalSalaryPercent = 0.0;\n            errorHandler('increments.multiple.modal.error.salary.nan');\n        }\n        /* Checks if the salary increase is lower than 0 */\n        if (customIncrease < 0) {\n            customIncrease = 0.0;\n            customIncreasePercent = 0.0;\n            finalSalaryPercent = 0.0;\n            errorHandler('increments.multiple.modal.error.salary');\n        }\n\n        let finalSalaryIncrease = (actualIncome * finalSalaryPercent) / 100;\n        let finalIncome = actualIncome + finalSalaryIncrease;\n\n        /* Set the object values */\n        obj.customSalaryIncrease = $filter('NumericFilter')(customIncrease, 2);\n        obj.customSalaryIncreasePercent = $filter('NumericFilter')(customIncreasePercent, 2);\n        obj.finalSalaryIncreasePercent = finalSalaryPercent;\n        obj.finalSalaryIncrease = finalSalaryIncrease;\n        obj.finalIncome = finalIncome;\n    };\n\n    /* Handles the check of a confirmed checkbox on the inputs table */\n    vm.changeConfirmed = (obj) => {\n        /* If the obj is confirmed, add it to the list */\n        if (obj.confirmed) {\n            vm.confirmedList.push(obj);\n\n            /* If not, search the list for it and delete it. It should be have added first... */\n        } else {\n            let index = 0;\n            for (index = 0, length = vm.confirmedList.length; index < length; index++) {\n                let item = vm.confirmedList[index];\n                if (item.categoryId === obj.categoryId) {\n                    break;\n                }\n            }\n            vm.confirmedList.splice(index, 1);\n        }\n    };\n\n    /* Save into BD the confirmed rows. This method will NOT save the increases. To save the increases they must be confirmed first. */\n    vm.saveConfirmed = () => {\n        /* If there are confirmed increases... */\n        if (vm.confirmedList.length > 0) {\n            EmployeeMultiple.saveConfirmedData({ directionId: vm.direction.id }, vm.confirmedList, (result) => {\n                vm.Modal = {\n                    msg: 'increments.multiple.modal.confirmed.success',\n                    title: 'increments.multiple.modal.confirmed.title',\n                    button: 'increments.multiple.modal.ok',\n                    action: () => {\n                        $window.location.reload();\n                    }\n                };\n                /* Now show the modal */\n                $('#myModal').modal('show');\n            },\n                (error) => {\n                    errorHandler(error.data.msg);\n                });\n        }\n    };\n\n    /* Saves the increases. */\n    vm.confirmIncrements = () => {\n        let increasesList = vm.employeesInfo.filter((item) => { return item.confirmed });\n        EmployeeMultiple.saveIncreases(increasesList,(result) => {\n                vm.Modal = {\n                    msg: 'increments.multiple.modal.confirmed.successb',\n                    title: 'increments.multiple.modal.confirmed.title',\n                    button: 'increments.multiple.modal.ok',\n                    action: () => {\n                        $window.location.reload();\n                    }\n                };\n                /* Now show the modal */\n                $('#myModal').modal('show');\n            },\n                (error) => {\n                    errorHandler(error.data.msg);\n                });\n    }\n\n    /* Obtains a PDF Export file */\n    vm.getPDFFile = () => {\n        let url = getURLExport('pdf');\n        window.open(url, '_self');\n    }\n\n    /* Obtains a XLS Export file */\n    vm.getXLSFile = () => {\n        let url = getURLExport('excel');\n        window.open(url, '_self');\n    }\n\n    /* Builds the export URL based on the combo selections and format passed by parameter */\n    var getURLExport = (format) => {\n        let url = 'api/employeeCatYear.' + format + '?directionId=' + vm.direction.id + '&year=' + vm.year;\n        if (!Mentoring.isEmpty(vm.area)) {\n            url += '&areaId=' + vm.area;\n        }\n        if (!Mentoring.isEmpty(vm.confirmed)) {\n            url += '&confirmed=' + vm.confirmed;\n        }\n        return url;\n    }\n\n    var errorHandler = (msg) => {\n        msg = msg || 'increments.multiple.modal.error';\n        vm.Modal = {\n            msg: msg,\n            title: 'increments.multiple.modal.error.title',\n            button: 'increments.multiple.modal.ok',\n            action: () => {\n                $('#myModal').modal('hide');\n            }\n        };\n        /* Now show the modal */\n        $('#myModal').modal('show');\n    };\n};\nangular.module('mentoringApp').controller('MultipleController', MultipleController);"]}