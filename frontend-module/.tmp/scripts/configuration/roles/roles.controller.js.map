{"version":3,"sources":["../../../../app/scripts/configuration/roles/roles.controller.js"],"names":[],"mappings":";;AAEA,YAAY,CAAC;;AAEb,SAAS,eAAe,CAAC,UAAU,EAAE,WAAW,EAAE,KAAK,EAAE,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE;AAChF,YAAI,EAAE,GAAG,IAAI,CAAC;;AAEd,UAAE,CAAC,QAAQ,GAAG,EAAE,CAAC;AACjB,UAAE,CAAC,KAAK,GAAG,EAAE,CAAC;AACd,UAAE,CAAC,GAAG,GAAG,EAAE,CAAC;AACZ,UAAE,CAAC,QAAQ,GAAG,KAAK,CAAC;AACpB,UAAE,CAAC,UAAU,GAAG,KAAK,CAAC;;;AAGtB,kBAAU,CAAC,YAAY,GAAG,eAAe,CAAC;;AAE1C,UAAE,CAAC,OAAO,GAAG,YAAM;AACX,2BAAW,CAAC,KAAK,CAAC,UAAC,OAAO,EAAK;AACvB,0BAAE,CAAC,SAAS,GAAG,OAAO,CAAC;iBAC9B,CAAC,CAAC;AACH,qBAAK,CAAC,KAAK,CAAC,UAAC,OAAO,EAAK;AACjB,0BAAE,CAAC,KAAK,GAAG,OAAO,CAAC;iBAC1B,CAAC,CAAC;SACV,CAAC;AACF,UAAE,CAAC,OAAO,EAAE,CAAC;;AAEb,UAAE,CAAC,MAAM,GAAG,YAAY;AAChB,oBAAI,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AAC7B,0BAAE,CAAC,UAAU,GAAG,KAAK,CAAC;iBAC7B;AACD,4BAAY,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,UAAC,OAAO,EAAK;AACpD,4BAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;AAChB,kCAAE,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;AAClC,oCAAI,EAAE,CAAC,GAAG,KAAK,YAAY,EAAE;AACrB,0CAAE,CAAC,UAAU,GAAG,KAAK,CAAC;iCAC7B,MAAM;AACC,0CAAE,CAAC,UAAU,GAAG,IAAI,CAAC;iCAC5B;yBACR,MAAM;AACC,kCAAE,CAAC,GAAG,GAAG,WAAW,CAAC;AACrB,kCAAE,CAAC,UAAU,GAAG,IAAI,CAAC;yBAC5B;iBACR,CAAC,CAAC;SACV,CAAC;;AAEF,UAAE,CAAC,OAAO,GAAG,UAAC,MAAM,EAAE,aAAa,EAAE,MAAM,EAAK;AACxC,oBAAI,MAAM,EAAE;AACJ,0BAAE,CAAC,QAAQ,GAAG,IAAI,CAAC;AACnB,4BAAI,aAAa,KAAK,WAAW,EAAE;AAC3B,sCAAM,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC;yBACrC,MAAM;AACC,oCAAI,aAAa,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;AAC3D,uCAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;yBACtC;iBACR;SACR,CAAC;CACT;AACD,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC","file":"roles.controller.js","sourcesContent":["/* jshint -W097 */\r\n/* globals angular, $, Mentoring*/\r\n'use strict';\r\n/*@ngInject*/\r\nfunction RolesController($rootScope, EmpleadosRL, Roles, RolesUsuario, Guardar, Borrar) {\r\n        var vm = this;\r\n\r\n        vm.empleado = [];\r\n        vm.roles = [];\r\n        vm.rol = '';\r\n        vm.correcto = false;\r\n        vm.habilitado = false;\r\n\r\n        // Activamos la opción de menú Configuración\r\n        $rootScope.activeOption = \"configuration\";\r\n\r\n        vm.loadAll = () => {\r\n                EmpleadosRL.query((result1) => {\r\n                        vm.empleados = result1;\r\n                });\r\n                Roles.query((result2) => {\r\n                        vm.roles = result2;\r\n                });\r\n        };\r\n        vm.loadAll();\r\n\r\n        vm.change = function () {\r\n                if ($('#role').hasClass('ng-dirty')) {\r\n                        vm.habilitado = false;\r\n                }\r\n                RolesUsuario.query({ userId: vm.empleado.id }, (result3) => {\r\n                        if (result3.length > 0) {\r\n                                vm.rol = result3[0].authorityName;\r\n                                if (vm.rol === 'ROLE_ADMIN') {\r\n                                        vm.habilitado = false;\r\n                                } else {\r\n                                        vm.habilitado = true;\r\n                                }\r\n                        } else {\r\n                                vm.rol = 'ROLE_USER';\r\n                                vm.habilitado = true;\r\n                        }\r\n                });\r\n        };\r\n\r\n        vm.guardar = (userId, authorityName, valido) => {\r\n                if (valido) {\r\n                        vm.correcto = true;\r\n                        if (authorityName === 'ROLE_USER') {\r\n                                Borrar.borrar({ id: userId });\r\n                        } else {\r\n                                var respuestaJSON = Guardar.agrupar(userId, authorityName);\r\n                                Guardar.guardar(respuestaJSON);\r\n                        }\r\n                }\r\n        };\r\n}\r\nangular.module('mentoringApp').controller('RolesController', RolesController);"]}