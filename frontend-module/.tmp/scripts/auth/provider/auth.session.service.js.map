{"version":3,"sources":["../../../../app/scripts/auth/provider/auth.session.service.js"],"names":[],"mappings":";;AAEA,YAAY,CAAC;AACb,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,CACzB,OAAO,CAAC,oBAAoB,EAAE,UAAU,IAAI,EAAE,KAAK,EAAE,mBAAmB,EAAE,OAAO,EAAE;AAChF,WAAO;AACH,aAAK,EAAE,eAAS,WAAW,EAAE;AACzB,gBAAI,IAAI,GAAG,aAAa,GAAG,WAAW,CAAC,OAAO,GAAG,GAAG,GAAG,kBAAkB,CAAC,WAAW,CAAC,QAAQ,CAAC,GAC3F,cAAc,GAAG,kBAAkB,CAAC,WAAW,CAAC,QAAQ,CAAC,GACzD,eAAe,CAAC;AACpB,mBAAO,KAAK,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,EAAE;AAC1C,uBAAO,EAAE;AACL,kCAAc,EAAE,mCAAmC;iBACtD;aACJ,CAAC,CAAC,OAAO,CAAC,UAAU,QAAQ,EAAE;AAC3B,mCAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,GAAG,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;AAClG,uBAAO,QAAQ,CAAC;aACnB,CAAC,CAAC,KAAK,CAAC,YAAU;AACf,oBAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;aAC7B,CAAC,CAAC;SACN;AACD,cAAM,EAAE,kBAAW;;AAEf,iBAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,UAAU,QAAQ,EAAE;AACjD,mCAAmB,CAAC,QAAQ,EAAE,CAAC;AAC/B,uBAAO,QAAQ,CAAC;aACnB,CAAC,CAAC;SACN;AACD,gBAAQ,EAAE,oBAAY;AAClB,gBAAI,KAAK,GAAG,mBAAmB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC7C,mBAAO,KAAK,CAAC;SAChB;AACD,qBAAa,EAAE,yBAAY;AACvB,gBAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC5B,mBAAO,CAAC,CAAC,KAAK,CAAC;SAClB;KACJ,CAAC;CACL,CAAC,CAAC","file":"auth.session.service.js","sourcesContent":["/* jshint -W097 */\n/* globals angular, $, Mentoring*/\n'use strict';\nangular.module('mentoringApp')\n    .factory('AuthServerProvider', function ($log, $http, localStorageService, $window) {\n        return {\n            login: function(credentials) {\n                var data = 'j_username=' + credentials.company + ':' + encodeURIComponent(credentials.username) +\n                    '&j_password=' + encodeURIComponent(credentials.password) +\n                    '&submit=Login';\n                return $http.post('api/authentication', data, {\n                    headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded'\n                    }\n                }).success(function (response) {\n                    localStorageService.set('token', $window.btoa(credentials.username + ':' + credentials.password));\n                    return response;\n                }).error(function(){\n                    $log.error(\"Login error\");\n                });\n            },\n            logout: function() {\n                // logout from the server\n                $http.post('api/logout').success(function (response) {\n                    localStorageService.clearAll();\n                    return response;\n                });\n            },\n            getToken: function () {\n                var token = localStorageService.get('token');\n                return token;\n            },\n            hasValidToken: function () {\n                var token = this.getToken();\n                return !!token;\n            }\n        };\n    });"]}