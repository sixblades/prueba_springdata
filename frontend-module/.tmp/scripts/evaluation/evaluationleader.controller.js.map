{"version":3,"sources":["../../../app/scripts/evaluation/evaluationleader.controller.js"],"names":[],"mappings":"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","file":"evaluationleader.controller.js","sourcesContent":["/* jshint -W097 */\r\n/* globals angular, $, Mentoring, dato*/\r\n    'use strict';\r\n    /*@ngInject*/\r\n    function EvaluationleaderController(QuestionsResource, StatesResource, AnswersResourceEL,\r\n        AnswersResource, Empleados, EmployeeEvaluationResource, CompetencesResource, PillarsResource) {\r\n    \r\n        var vm = this;\r\n        vm.states = [];\r\n        vm.empleado = [];\r\n        vm.question = [];\r\n        vm.competence = [];\r\n        vm.pillar = [];\r\n    \r\n        vm.loadAll = function () {\r\n            QuestionsResource.query(function (result) {\r\n                vm.questionss = result;\r\n            });\r\n            StatesResource.query(function (result) {\r\n                vm.statess = result;\r\n            });\r\n            CompetencesResource.query(function (result) {\r\n                vm.competences = result;\r\n            });\r\n            PillarsResource.query(function (result) {\r\n                vm.pillars = result;\r\n            });\r\n        };\r\n        vm.loadAll();\r\n    \r\n        vm.empleado = [];\r\n        vm.empleados = [];\r\n        vm.mando = [];\r\n        vm.mandos = [];\r\n        Empleados.query(function (result) {\r\n            var empleados = [];\r\n            var mandos = [];\r\n            var k = 0;\r\n            var j = 0;\r\n            for (var i in result) {\r\n                if (result[i].leaderId == dato) {\r\n                    empleados[k] = result[i];\r\n                    k++;\r\n                }\r\n                if (result[i].leader == 1) {\r\n                    mandos[j] = result[i];\r\n                    j++;\r\n                }\r\n            }\r\n            vm.empleados = empleados;\r\n            vm.mandos = mandos;\r\n        });\r\n    \r\n        vm.changeMando = function (dato) {\r\n            vm.loadAll();\r\n            vm.empleado = [];\r\n            vm.empleados = [];\r\n            var empleados = [];\r\n            Empleados.query(function (result) {\r\n                var k = 0;\r\n                for (var i in result) {\r\n                    if (result[i].leaderId == dato.employeeId) {\r\n                        empleados[k] = result[i];\r\n                        k++;\r\n                    }\r\n                }\r\n                vm.empleados = empleados;\r\n            });\r\n        };\r\n        \r\n        vm.change = function (dato) {\r\n            vm.loadAll();\r\n    \r\n            vm.submitForm = function (datos, observaciones) {\r\n                var usuario = dato.employeeId;\r\n                var leader = vm.mando.employeeId;\r\n                var respuestaJSON = AnswersResourceEL.agrupar(datos, usuario);\r\n                AnswersResourceEL.guardar(respuestaJSON);\r\n                \r\n                var respuestaJSON2 = AnswersResourceEL.agrupar2(datos, usuario, observaciones, leader);\r\n                AnswersResourceEL.guardar2(respuestaJSON2);\r\n            };\r\n    \r\n            vm.respuesta = [];\r\n            vm.observaciones = \"Escriba aqu√≠ las observaciones\";\r\n    \r\n            EmployeeEvaluationResource.query({ employeeId: dato.employeeId }, function (result) {\r\n                var observaciones = null;\r\n                var codigoResp = null;\r\n                for (var j in result) {\r\n                    if (result[j].leaderId == vm.mando.employeeId.employeeId) {\r\n                        codigoResp = result[j].answerId;\r\n                        observaciones = result[j].observaciones;\r\n                    }\r\n                }\r\n      \r\n                vm.observaciones = observaciones;\r\n                if (codigoResp !== undefined) {\r\n                    AnswersResource.query({ id: codigoResp }, function (result) {\r\n                        var seleccionados = [];\r\n                        for (var i in result) {\r\n                            seleccionados[result[i].questionId] = result[i].statesId;\r\n                        }\r\n                        vm.respuesta = seleccionados;\r\n                    });\r\n                }\r\n                vm.observaciones = result[0].observaciones;\r\n            });\r\n        };\r\n    }\r\n    angular.module('mentoringApp').controller('EvaluationleaderController', EvaluationleaderController);"]}