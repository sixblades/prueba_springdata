{"version":3,"sources":["../../../app/scripts/evaluation/evaluation.controller.js"],"names":[],"mappings":"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","file":"evaluation.controller.js","sourcesContent":["/* jshint -W097 */\r\n/* globals angular, $, Mentoring*/\r\n'use strict';\r\n/*@ngInject*/\r\nfunction EvaluationController($rootScope, $sce, $state, Principal, $translate, QuestionsResource, LastEvaluationAssigned, \r\n    GetLastAutoEvalByEmployeeId, LastEvaluationAssignedWithEvalType, StatesResource, AnswersSelect, AnswersEval, \r\n    EmpleadosEvaluables, EvaluationEmployeeLeaderResource, AnswersResource, EmpleadosAE, EmployeeEvaluationResource, \r\n    CompetencesResource, PillarsResource, isEvaluationDate, isFinalEvaluationDate, EmployeeIsLeaderResource, \r\n    EmployeesRRHH, EmpleadosCn, EmployeesDIRECTOR, PrintService) {\r\n\r\n\tvar vm = this;\r\n\tvar idToModify; //en caso de que en el alta se cargue una evaluacion existente, se almacenara su id por si se quiere modificar.\r\n\r\n\t// Comprobamos si el estado es diferente al login\r\n\tif ($state.current.name != 'login') {\r\n        \r\n        vm.questions = []; vm.states = []; vm.empleado = {}; vm.competence = []; vm.pillar = [];\r\n        vm.evaluable = {}; vm.destacados = []; vm.mejorar = []; vm.selected = []; vm.respuesta = [];\r\n                    \r\n\t\tPrincipal.identity().then(function (account) {\r\n\t\t\t// Activamos la opción de menú Alta de Evaluación\r\n\t\t\t$rootScope.activeOption = \"evaluation\";\r\n\t\t\t// Recuperamos la información del usuario\r\n\t\t\tvm.account = account;\r\n\t\t\t// Asignamos los permisos del usuario a partir de su role.\r\n\t\t\tif (!Mentoring.isUndefinedOrNull(account) && !Mentoring.isUndefinedOrNull(account.roles) \r\n                && !Mentoring.isUndefinedOrNull(account.isLeader)) {\r\n                    \r\n\t\t\t\tvm.isLeader = account.isLeader;\r\n\t\t\t\tvm.employeeId = account.employeeId;\r\n\t\t\t\t//permite al usuario dar de alta una evaluacion\r\n\t\t\t\tvm.evaluableByUser = (account.isLeader == 1 || account.roles.indexOf('ROLE_RRHH') > -1\r\n\t\t\t\t\t|| account.roles.indexOf('ROLE_DIRECTORG') > -1) ? true : false;\r\n\t\t\t\tvm.user = {\r\n                    firstName: account.firstName,\r\n                    lastName: account.lastName\r\n                };\r\n\t\t\t\tvm.roleDIRECTOR = account.roles.indexOf('ROLE_DIRECTOR') > -1;\r\n\t\t\t\tvm.roleDIRECTORG = account.roles.indexOf('ROLE_DIRECTORG') > -1;\r\n\t\t\t\tvm.roleGERENTE = account.roles.indexOf('ROLE_GERENTE') > -1;\r\n\t\t\t\tvm.roleADMIN = account.roles.indexOf('ROLE_ADMIN') > -1;\r\n\t\t\t\tvm.roleRRHH = account.roles.indexOf('ROLE_RRHH') > -1;\r\n\t\t\t\tvm.isEvaluation = false;\r\n                \r\n\t\t\t\t// El usuario puede autoevaluarse en funcion de su rol\r\n\t\t\t\tvm.isAutoEvaluation = (vm.roleDIRECTOR || vm.roleGERENTE || vm.roleDIRECTORG) ? false : true;\r\n\t\t\t\tvm.listSelect = [];\r\n\r\n\t\t\t\t// Chart.js Data\r\n\t\t\t\tvm.data = {\r\n\t\t\t\t\tlabels: ['Gestión: Talent', 'Gestión: Attitude', 'Gestión: Business', 'Mando: Talent Attitude', 'Mando: Business', 'VASS'],\r\n\t\t\t\t\tdatasets: [{\r\n\t\t\t\t\t\tlabel: 'Evaluación', fillColor: 'rgba(151,187,205,0.2)', strokeColor: 'rgba(151,187,205,1)',\r\n\t\t\t\t\t\tpointColor: 'rgba(151,187,205,1)', pointStrokeColor: '#fff', pointHighlightFill: '#fff', \r\n                        pointHighlightStroke: 'rgba(220,220,220,1)', data: [70, 88, 87, 70, 75, 85]\r\n\t\t\t\t\t}]\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Chart.js Options\r\n\t\t\t\tvm.options = {\r\n\t\t\t\t\tresponsive: true, scaleShowLine: true, angleShowLineOut: true, scaleShowLabels: false,\r\n\t\t\t\t\tscaleBeginAtZero: true, angleLineColor: 'rgba(0,0,0,.1)', angleLineWidth: 1, pointLabelFontFamily: '\"Arial\"',\r\n\t\t\t\t\tpointLabelFontStyle: 'normal', pointLabelFontSize: 10, pointLabelFontColor: '#666', pointDot: true,\r\n\t\t\t\t\tpointDotRadius: 3, pointDotStrokeWidth: 1, pointHitDetectionRadius: 20,\r\n\t\t\t\t\tdatasetStroke: true, datasetStrokeWidth: 2, datasetFill: true,\r\n\t\t\t\t\tlegendTemplate: '<ul class=\"tc-chart-js-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Recuperamos si estamos o no en periodo de evaluacion\r\n\t\t\t\tisEvaluationDate.get((isDate) => {\r\n\t\t\t\t\tvm.isEvaluationDate = isDate.value;\r\n\t\t\t\t});\r\n                \r\n                // Recuperamos si estamos en evaluacion final o no\r\n                isFinalEvaluationDate.get((isDate) => {\r\n                    vm.isFinalEvaluationDate = isDate.value;\r\n                    populateAndShowEvaluations();\r\n                });\r\n\r\n\t\t\t\tvar populateAndShowEvaluations = () => {\r\n                    let classStr = 'panel panel-info evaluacion_forms';\r\n\t\t\t\t\t// if the employee is admin, hr, general director or leader\r\n\t\t\t\t\tif ($rootScope.roleRRHH || account.isLeader == 1) {\r\n\t\t\t\t\t\tvm.empleado = [];\r\n\t\t\t\t\t\t// If the employee is leader\r\n\t\t\t\t\t\tif (!(vm.roleDIRECTORG || vm.roleADMIN || vm.roleDIRECTOR)) {\r\n\t\t\t\t\t\t\tEmpleadosAE.query({leaderId: vm.employeeId}, (result) => {\r\n\t\t\t\t\t\t\t\t// If it's not final evaluation period, add the employee itself to the list\r\n\t\t\t\t\t\t\t\t// so he can do his own self assessment\r\n\t\t\t\t\t\t\t\tif(!vm.isFinalEvaluation && vm.isEvaluationDate) {\r\n\t\t\t\t\t\t\t\t\tresult.splice(0,0,{\r\n\t\t\t\t\t\t\t\t\t\tid: vm.account.employeeId,\r\n\t\t\t\t\t\t\t\t\t\temployeeId: vm.account.employeeId,\r\n\t\t\t\t\t\t\t\t\t\tfirstSurnameEmployee: vm.account.lastName,\r\n\t\t\t\t\t\t\t\t\t\tnameEmployee: vm.account.firstName\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvm.evaluables = result;\r\n\t\t\t\t\t\t\t\tif (vm.isEvaluationDate) {\r\n\t\t\t\t\t\t\t\t\tvm.classEval = classStr;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (vm.roleDIRECTORG || vm.roleADMIN) {\r\n\t\t\t\t\t\t\tEmpleadosEvaluables.query({leaderId: vm.employeeId}, (result) => {\r\n\t\t\t\t\t\t\t\t// If we are in final evaluation period, the DIRECTORG nor the ADMIN can't evaluate themselves\r\n\t\t\t\t\t\t\t\tif (vm.isFinalEvaluation) {\r\n\t\t\t\t\t\t\t\t\tvm.evaluables = result.filter((e) => {\r\n\t\t\t\t\t\t\t\t\t\treturn e.id != vm.account.employeeId\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvm.evaluables = result;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (vm.roleRRHH) {\r\n\t\t\t\t\t\t\tEmployeesRRHH.query((result) => {\r\n\t\t\t\t\t\t\t\t// If it's not final evaluation period, add the employee itself to the list\r\n\t\t\t\t\t\t\t\t// so he can do his own self assessment\r\n\t\t\t\t\t\t\t\tif(!vm.isFinalEvaluation && vm.isEvaluationDate) {\r\n\t\t\t\t\t\t\t\t\tresult.splice(0, 0, {\r\n\t\t\t\t\t\t\t\t\t\tid: vm.account.employeeId,\r\n\t\t\t\t\t\t\t\t\t\temployeeId: vm.account.employeeId,\r\n\t\t\t\t\t\t\t\t\t\tfirstSurname: vm.account.lastName,\r\n\t\t\t\t\t\t\t\t\t\tname: vm.account.firstName\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvm.evaluables = result;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (vm.roleDIRECTOR) {\r\n\t\t\t\t\t\t\tEmployeesDIRECTOR.query({directionId: account.employeeId}, (res) => {\r\n\t\t\t\t\t\t\t\t// If we are in final evaluation period, the DIRECTOR nor the ADMIN can't evaluate himself\r\n\t\t\t\t\t\t\t\tif (vm.isFinalEvaluation) {\r\n\t\t\t\t\t\t\t\t\tvm.evaluables = res.filter((e) => {\r\n\t\t\t\t\t\t\t\t\t\treturn e.id != vm.account.employeeId\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvm.evaluables = res;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (vm.isEvaluationDate) {\r\n\t\t\t\t\t\t\tvm.classEval = classStr;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvm.classEval = classStr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                    \r\n                    vm.isFinalEvaluation = vm.isFinalEvaluationDate;\r\n                    vm.classEval = vm.isFinalEvaluation ? classStr + ' final' : classStr;\r\n\r\n\t\t\t\t\t// Consultamos los valores para cargar las preguntas y respuestas\r\n\t\t\t\t\tvm.msgModal = 'incorrecto';\r\n\t\t\t\t\tvm.loadAll();\r\n                    \r\n\t\t\t\t\t// En periodo de autoevaluacion renderizamos la ultima, si la hay\r\n\t\t\t\t\t// Chequeamos la evaluacion final tb pq esta prevalece siempre\r\n\t\t\t\t\tif (!(vm.roleDIRECTORG || vm.roleDIRECTOR || vm.roleADMIN || vm.roleRRHH)\r\n\t\t\t\t\t\t&& !vm.isFinalEvaluation && vm.isEvaluationDate) {\r\n\t\t\t\t\t\tgetAndRenderLastEvaluation(vm.employeeId, vm.employeeId, 'auto');\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tGetLastAutoEvalByEmployeeId.query({employeeId: vm.employeeId}, (result) => {\r\n\t\t\t\t\t\t\tif (result.length > 0) {\r\n\t\t\t\t\t\t\t\tidToModify = result[0].id;\r\n\t\t\t\t\t\t\t\tvm.observaciones = result[0].observations;\r\n\t\t\t\t\t\t\t\tlet codigoResp = result[0].id;\r\n\t\t\t\t\t\t\t\tif (codigoResp != undefined) {\r\n\t\t\t\t\t\t\t\t\tAnswersResource.query({id: codigoResp}, answersResourceCb);\r\n\t\t\t\t\t\t\t\t\tAnswersSelect.query({id: codigoResp}, (result22) => {\r\n\t\t\t\t\t\t\t\t\t\tif (result22.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tvm.destacados[0] = result22[0].questionCode;\r\n\t\t\t\t\t\t\t\t\t\t\tvm.destacados[1] = result22[1].questionCode;\r\n\t\t\t\t\t\t\t\t\t\t\tvm.destacados[2] = result22[2].questionCode;\r\n\t\t\t\t\t\t\t\t\t\t\tvm.mejorar[0] = result22[3].questionCode;\r\n\t\t\t\t\t\t\t\t\t\t\tvm.mejorar[1] = result22[4].questionCode;\r\n\t\t\t\t\t\t\t\t\t\t\tvm.mejorar[2] = result22[5].questionCode;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// Comprobamos si el usuario está autenticado.\r\n\t\t\t\t\tif ($state.current.name != 'login') {\r\n\t\t\t\t\t\tvm.isAuthenticated = Principal.isAuthenticated();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n    vm.showEvaluatorInput = () => {\r\n        let showInput = true;\r\n        // Leaders, HR, Managers, Directors and Admin can see this input.\r\n        if (vm.isLeader || vm.roleRRHH || vm.roleGERENTE || vm.roleDIRECTOR || vm.roleDIRECTORG || vm.roleADMIN) {\r\n            showInput = true;\r\n        }\r\n        // Only case when the user cant see the input is when the user is the evaluated employee.\r\n        if(vm.evaluable.info == null || vm.evaluable.info.id == vm.account.employeeId) {\r\n            showInput = false;\r\n        }\r\n        return showInput;\r\n    }\r\n    \r\n\t/* Muestra o no el formulario de auto evaluacion */\r\n\tvm.showEvaluationForm = function() {\r\n\t\treturn vm.roleDIRECTORG || vm.roleADMIN || vm.roleRRHH || vm.isLeader || vm.isEvaluationDate;\r\n\t};\r\n\t\r\n\tvm.getQuestionCode = function (questionCode) {\r\n\t\tvm.codePregunta = questionCode;\r\n\t\tvm.definicionInfo = $sce.trustAsHtml($translate.instant('evaluation.info.' + questionCode + '.comportamientoInfo'));\r\n\t};\r\n\r\n\t// Función para cargar los valores del controlador\r\n\tvm.loadAll = () => {\r\n\t\tif (Mentoring.isUndefinedOrNull(vm.evaluable.info)) {\r\n\t\t\tif (vm.isLeader === 0) {\r\n\t\t\t\tQuestionsResource.query({id: 0}, (result) => {\r\n\t\t\t\t\tvm.questionss = result;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tQuestionsResource.query((result) => {\r\n\t\t\t\t\tvm.questionss = result;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tCompetencesResource.query((result) => {\r\n\t\t\tlet aux = [];\r\n\t\t\tlet j = 0;\r\n\t\t\tif (vm.isLeader === 0) {\r\n\t\t\t\tfor (let aa in result) {\r\n\t\t\t\t\tif (result[aa].competenceCode != 'mando') {\r\n\t\t\t\t\t\taux[j] = result[aa];\r\n\t\t\t\t\t\tj++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvm.competences = aux;\r\n\t\t\t} else {\r\n\t\t\t\tvm.competences = result;\r\n\t\t\t}\r\n\t\t});\r\n        loadPillarsAndStates();\r\n\t};\r\n    \r\n\tvm.select = function (index, idPregunta) {\r\n\t\tvm.selected[idPregunta] = index;\r\n\t};\r\n\r\n\tvm.change = function () {\r\n\t\tidToModify = null;\r\n\t\tvm.observaciones = '';\r\n\t\tvm.selected = [];\r\n\t\tvm.respuesta = [];\r\n\t\tvm.destacados = [];\r\n\t\tvm.mejorar = [];\r\n\t\t\t\r\n\t\t// Comprobamos que hay seleccionado uno (evaluamos a alguien)\r\n\t\tif (!Mentoring.isUndefinedOrNull(vm.evaluable.info)) {\r\n\t\t\t// Pondremos las preguntas en funcion de si el evaluado es o no lider\r\n\t\t\tEmployeeIsLeaderResource\r\n                .get({employeeId: (vm.evaluable.info.employeeId || vm.evaluable.info.id)}, (isLeaderResult) => {\r\n                    buildQuestions4Evaluation(parseInt(isLeaderResult[0]));\r\n                    // Solo recuperamos en caso de autoevaluaciones o evaluaciones finales\r\n                    if (vm.isFinalEvaluationDate || vm.isEvaluationDate) {\r\n                        var employeeId = (vm.evaluable.info.employeeId || vm.evaluable.info.id);\r\n                        getAndRenderLastEvaluation(employeeId, vm.employeeId, getEvaluationType());\r\n                    }\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tfunction getEvaluationType() {\r\n\t\tvar result = 'eval';\r\n        \r\n\t\tif (vm.isFinalEvaluationDate) {\r\n\t\t\tresult = 'final';\r\n\t\t} else if (vm.isEvaluationDate) {\r\n\t\t\tresult = 'auto';\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// creo que no esta bien, hace consulta de las evaluaciones (empleado, lider) y renderiza la primera posicion del resultado\r\n\tfunction heredado(employeeIdVal, leaderIdVal) {\r\n\t\tEvaluationEmployeeLeaderResource.query({employeeId: employeeIdVal, leaderId: leaderIdVal}, \r\n            (result) => {\r\n                if (result.length > 0) {\r\n                    idToModify = result[0].id;\r\n                    var codigoResp = result[0].id;\r\n                    var observaciones = result[0].observations;\r\n                    vm.observaciones = observaciones;\r\n                    if (!Mentoring.isUndefinedOrNull(codigoResp)) {\r\n                        getAnswersCodigo(codigoResp, true);\r\n                    }\r\n                }\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getAndRenderAllEvaluationByEmployee(employeeId) {\r\n\t\tEmployeeEvaluationResource.query({employeeId: employeeId}, obtainEvaluationEmployeeCb);\r\n\t}\r\n\r\n\tfunction isDirectorOrDirectorGOrAdminIrRRHHRol() {\r\n\t\treturn (vm.roleDIRECTOR || vm.roleDIRECTORG || vm.roleADMIN || vm.roleRRHH);\r\n\t}\r\n\r\n\tfunction getAndRenderLastEvaluation(employeeIdVal, leaderIdVal, evaluationTypeVal) {\r\n\t\tLastEvaluationAssignedWithEvalType.get({\r\n\t\t\temployeeId: employeeIdVal, \r\n            leaderId: leaderIdVal, \r\n            evaluationType: evaluationTypeVal\r\n\t\t}, lastEvaluationCb);\r\n\t}\r\n\r\n\tfunction buildQuestions4Evaluation(isLeaderResult) {\r\n\t\tvm.loadAll = function () {\r\n\t\t\tif (isLeaderResult === 0) {\r\n\t\t\t\tQuestionsResource.query({id: 0}, (result) => {\r\n\t\t\t\t\tvm.questionss = result;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tQuestionsResource.query((result) => {\r\n\t\t\t\t\tvm.questionss = result;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tCompetencesResource.query((result) => {\r\n\t\t\tlet aux = [];\r\n\t\t\tlet j = 0;\r\n\t\t\tif (isLeaderResult === 0) {\r\n\t\t\t\tfor (let aa in result) {\r\n\t\t\t\t\tif (result[aa].competenceCode != 'mando') {\r\n\t\t\t\t\t\taux[j] = result[aa];\r\n\t\t\t\t\t\tj++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvm.competences = aux;\r\n\t\t\t} else {\r\n\t\t\t\tvm.competences = result;\r\n\t\t\t}\r\n\t\t});\r\n\t\tloadPillarsAndStates();\r\n\t\tvm.loadAll();\r\n\t}\r\n\r\n\t/** Función que se lanza al realizar un cambio en alguno de los selectores. */\r\n\tvm.changeoLD = function (dato) {\r\n\t\tidToModify = undefined;\r\n        vm.observaciones = '';\r\n        vm.selected = [];\r\n        vm.respuesta = [];\r\n        vm.observaciones = '';\r\n        vm.destacados = [];\r\n        vm.mejorar = [];\r\n        \r\n\t\tif (!(vm.roleDIRECTOR || vm.roleDIRECTORG || vm.roleADMIN || vm.roleRRHH)) {\r\n\t\t\tif (Mentoring.insUndefinedOrNull(vm.evaluable.info)) {\r\n\t\t\t\tvm.isAutoEvaluation = vm.isEvaluation ? true : false;\r\n\t\t\t\tEmployeeEvaluationResource.query({employeeId: vm.employeeId}, obtainEvaluationEmployeeCb);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvm.isEvaluation = true;\r\n\t\t\t\tEmployeeIsLeaderResource.get({employeeId: vm.evaluable.info.employeeId}, obtainEmployeeLeaderCb);\r\n\t\t\t\tLastEvaluationAssigned.get({\r\n\t\t\t\t\temployeeId: vm.evaluable.info.employeeId, leaderId: vm.employeeId\r\n\t\t\t\t}, lastEvaluationCb);\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (Mentoring.insUndefinedOrNull(vm.evaluable.info)) {\r\n\t\t\t\tvm.isAutoEvaluation = vm.isEvaluation ? true : false;\r\n\t\t\t\tEmployeeEvaluationResource.query({employeeId: vm.employeeId}, obtainEvaluationEmployeeCb);\r\n\t\t\t} else {\r\n\t\t\t\tvm.isEvaluation = true;\r\n\t\t\t\tEmployeeIsLeaderResource.get({employeeId: vm.evaluable.info.id}, obtainEmployeeLeaderCb);\r\n\t\t\t\tEvaluationEmployeeLeaderResource.query(\r\n                    {employeeId: vm.evaluable.info.id, \r\n                    leaderId: vm.employeeId\r\n\t\t\t\t}, obtainEvaluationEmployeeCb);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n    \r\n    var lastEvaluationCb = (lastEvaluation) => {\r\n        if (!Mentoring.isUndefinedOrNull(lastEvaluation)) {\r\n            idToModify = lastEvaluation.id;\r\n            var codigoResp = lastEvaluation.id;\r\n            vm.observaciones = lastEvaluation.observations;\r\n            if (!Mentoring.isUndefinedOrNull(codigoResp)) {\r\n                getAnswersCodigo(codigoResp, true);\r\n            }\r\n        }\r\n    };\r\n    var obtainEvaluationEmployeeCb = (result) => {\r\n        if (result.length > 0) {\r\n            idToModify = result[0].id;\r\n            var codigoResp = result[0].id;\r\n            vm.observaciones = result[0].observations;\r\n            if (!Mentoring.isUndefinedOrNull(codigoResp)) {\r\n                getAnswersCodigo(codigoResp, true);\r\n            }\r\n        }\r\n    };\r\n    var obtainEmployeeLeaderCb = (result2) => {\r\n\t\tvm.evaluadoLider = parseInt(result2[0]);\r\n        vm.loadAll = function () {\r\n            if (vm.evaluadoLider === 0) {\r\n                QuestionsResource.query({id: 0}, (result) => {\r\n                    vm.questionss = result;\r\n                });\r\n            } else {\r\n                QuestionsResource.query((result) => {\r\n                    vm.questionss = result;\r\n                });\r\n            }\r\n        };\r\n        CompetencesResource.query((result) => {\r\n            let aux = [];\r\n            let j = 0;\r\n            if (vm.evaluadoLider === 0) {\r\n                for (let aa in result) {\r\n                    if (result[aa].competenceCode != 'mando') {\r\n                        aux[j] = result[aa];\r\n                        j++;\r\n                    }\r\n                }\r\n                vm.competences = aux;\r\n            } else {\r\n                vm.competences = result;\r\n            }\r\n        });\r\n        loadPillarsAndStates();\r\n        vm.loadAll();\r\n    };\r\n    \r\n    /* Loads the pillars and states */\r\n    var loadPillarsAndStates = () => {\r\n        StatesResource.query((result) => {\r\n            vm.statess = result;\r\n        });\r\n        PillarsResource.query((result) => {\r\n            vm.pillars = result;\r\n        });\r\n    };\r\n\r\n\t/** Función para enviar la evaluación. */\r\n\tvm.submitForm = function (valido, datos, observaciones) {\r\n\t\tobservaciones = observaciones || '';\r\n\t\t/*if (!vm.account.isLeader && vm.roleRRHH && !vm.roleADMIN) {\r\n\t\t\t// Dialogo de error al guardar un alta nueva siendo RRHH y no siendo leader\r\n\t\t\tvm.msgModal = 'errorRRHHAlta';\r\n            $('#myModalGuardado12345').modal('show');\r\n\t\t}*/\r\n\t\t// Intenta autoevaluarse alguien no evaluable\r\n\t\tif (Mentoring.isUndefinedOrNull(vm.evaluable.info) && !vm.account.isEvaluable) {\r\n\t\t\tvm.msgModal = 'errorNoEvaluable';\r\n            $('#myModalGuardado12345').modal('show');\r\n\t\t}\r\n\t\t// Empleado se intenta autoevaluar cuando no es periodo de autoevaluacion\r\n\t\telse if (Mentoring.isUndefinedOrNull(vm.evaluable.info) && !vm.isEvaluationDate) {\r\n\t\t\tvm.msgModal = 'errorNoAutoEvaluable';\r\n            $('#myModalGuardado12345').modal('show');\r\n            \r\n\t\t} else if (valido) {\r\n\t\t\tif (vm.validarNoSeObserva(datos)) {\r\n\t\t\t\tvm.msgModal = 'correcto';\r\n\t\t\t\tlet evaluationToSave = null;\r\n\t\t\t\tlet evaluationType = null;\r\n\t\t\t\tlet employee = null;\r\n\t\t\t\t\r\n                if ((Mentoring.isUndefinedOrNull(vm.evaluable.info) || vm.evaluable.info.id === vm.employeeId) && vm.isEvaluationDate) {\r\n\t\t\t\t\temployee = vm.employeeId;\r\n\t\t\t\t\tevaluationType = 'auto';\r\n\t\t\t\t\tevaluationToSave = AnswersEval.agrupar2(datos, employee, employee, observaciones, vm.observacionesEvaluador, evaluationType, vm.isFinalEvaluationDate, idToModify);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!(vm.roleDIRECTOR || vm.roleDIRECTORG || vm.roleADMIN || vm.roleRRHH)) {\r\n\t\t\t\t\t\temployee = vm.evaluable.info.employeeId;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\temployee = vm.evaluable.info.id;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar evaluator = vm.employeeId;\r\n\t\t\t\t\tevaluationType = vm.isFinalEvaluationDate ? 'final' : 'eval';\r\n\t\t\t\t\tevaluationToSave = AnswersEval.agrupar2(datos, evaluator, employee, observaciones, vm.observacionesEvaluador, evaluationType, vm.isFinalEvaluationDate, idToModify);\r\n\t\t\t\t}\r\n\t\t\t\tvar numDes = 1;\r\n\t\t\t\tvar numMej = 4;\r\n                \r\n                let answer = AnswersEval.agrupar(datos, 0, vm.isFinalEvaluationDate);\r\n\t\t\t\tlet answerOutstanding = AnswersEval.agrupar3(0, numDes, vm.destacados, vm.isFinalEvaluationDate);\r\n\t\t\t\tlet answerImprovable = AnswersEval.agrupar3(0, numMej, vm.mejorar, vm.isFinalEvaluationDate);\r\n\t\t\t\tlet obj = {\r\n                    evaluation: evaluationToSave,\r\n                    answers: answer,\r\n                    outstanding: answerOutstanding,\r\n                    improvable: answerImprovable\r\n                }\t\r\n\t\t\t\tvm.disableButton = true;\r\n                AnswersEval.guardar2(obj).then((obj) => {\r\n                    if(obj.data.msg == 'save.evaluation.no.mark') {\r\n                        vm.msgModal = 'correctoNoNota';\r\n                    } else {\r\n                        vm.msgModal = 'correcto';\r\n                    }\r\n                    $('#myModalGuardado12345').modal({\r\n                        keyboard: false,\r\n                        backdrop: 'static',\r\n                        show: true\r\n                    });\r\n\t\t\t\t}, (reason) => {\r\n\t\t\t\t\tvm.msgModal = 'guardarFalla';\r\n                    $('#myModalGuardado12345').modal('show');\r\n\t\t\t\t\tPrintService.print(reason.stack);\r\n\t\t\t\t\tvm.disableButton = false;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvm.msgModal = 'noSeObserva';\r\n                $('#myModalGuardado12345').modal('show');\r\n\t\t\t\tvm.disableButton = false;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n    vm.closeDialog = () => {\r\n        $('#myModalGuardado12345').on('hidden.bs.modal', function (e) {\r\n            $state.go('home');\r\n        });\r\n        $('#myModalGuardado12345').modal('hide');\r\n    }\r\n\r\n\t/**\r\n\t* Método que comprueba si sólo existe una respuesta \"No se Observa\" por pilar.\r\n\t* @param datos\r\n\t* \t\t\tDatos que ha contestado el usuario.\r\n\t* @return boolean\r\n\t* \t\t\tBooleano que indica si e\r\n\t*/\r\n\tvm.validarNoSeObserva = function (datos) {\r\n\t\tvar pillars = '';\r\n\t\tvar pillar;\r\n\t\tfor (var i in datos) {\r\n\t\t\tif (datos[i] === 6) {\r\n\t\t\t\tpillar = vm.getPillar('preg' + i);\r\n\t\t\t\t// Comprobamos si existe el pillar\r\n\t\t\t\tif (pillar !== 0) {\r\n\t\t\t\t\tif (pillars.indexOf(pillar) < 0) {\r\n\t\t\t\t\t\tpillars += pillar;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t* Método que recupera del listado de competencias el código del pilar al que pertenece a partir del código de la competencia.\r\n\t* \r\n\t* @param questionId\r\n\t* \t\t\tIdentificador de la pregunta.\r\n\t* @return pillarId \r\n\t* \t\t\tindentificador del pilar al que pertenece la competencia\r\n\t*/\r\n\tvm.getPillar = function (questionId) {\r\n\t\tvar questions = vm.questionss;\r\n\t\tif (!Mentoring.isUndefinedOrNull(questions)) {\r\n\t\t\tfor (var i = 0, len=questions.length; i < len; i++) {\r\n\t\t\t\tif (questions[i].questionsCode === questionId) {\r\n\t\t\t\t\treturn questions[i].pillarId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\r\n\r\n\tvm.add = function () {\r\n\t\tvm.listSelect = [];\r\n\t\tfor(var i=0; i<3;i++) {\r\n\t\t\tif (!Mentoring.isUndefinedOrNull(vm.destacados[i])) {\r\n\t\t\t\tvm.listSelect.push(vm.destacados[i]);\r\n\t\t\t}\r\n\t\t\tif (!Mentoring.isUndefinedOrNull(vm.mejorar[i])) {\r\n\t\t\t\tvm.listSelect.push(vm.mejorar[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction getAnswersCodigo(codigoResp, push) {\r\n\t\tAnswersResource.query({id: codigoResp}, answersResourceCb);\r\n        \r\n\t\tAnswersSelect.query({id: codigoResp}, (result) => {\r\n\t\t\tlet destIndex = 0;\r\n\t\t\tlet mejIndex = 0;\r\n\t\t\tfor(var i=0,len=result.length;i<len;i++) {\r\n\t\t\t\tif(i<3) {\r\n\t\t\t\t\tvm.destacados[destIndex] = result[i].questionCode;\r\n\t\t\t\t\tdestIndex++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.mejorar[mejIndex] = result[i].questionCode;\r\n\t\t\t\t\tmejIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tif(push) {\r\n\t\t\t\t\tvm.listSelect.push(result[i].questionCode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n    \r\n    var answersResourceCb = (result) => {\r\n        vm.respuesta = [];\r\n        for (var i in result) {\r\n            let item = result[i];\r\n            vm.respuesta[item.questionId] = item.statesId;\r\n            vm.selected[item.questionId] = item.statesId - 1;\r\n        }\r\n    }\r\n}\r\nangular.module('mentoringApp').controller('EvaluationController', EvaluationController);"]}