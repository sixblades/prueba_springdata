{"version":3,"sources":["../../app/scripts/app.config.js"],"names":[],"mappings":"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","file":"app.config.js","sourcesContent":["/* jshint -W097 */\r\n/* globals angular, $, Mentoring*/\r\n'use strict';\r\nangular.module('mentoringApp')\r\n\t/* Configuracion del decorator del servicio $log */\r\n\t.config(function ($provide) {\r\n\t\t$provide.decorator('$log', function ($delegate) {\r\n\t\t\t/* Guardamos la funcion original */\r\n\t\t\tvar errorFn = $delegate.error;\r\n\t\t\t$delegate.error = function () {\r\n\t\t\t\t/* Guardamos los argumentos de llamada a la funcion */\r\n\t\t\t\tvar args = [].slice.call(arguments);\r\n\t\t\t\tvar msg = typeof args[0] === 'string' ? args[0] : '';\r\n\t\t\t\tvar errorObj = {\r\n\t\t\t\t\tmsg: msg,\r\n\t\t\t\t\tlevel: 'ERROR'\r\n\t\t\t\t};\r\n\t\t\t\tvar header = Mentoring.getCookie('CSRF-TOKEN');\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: 'api/sendLog',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: JSON.stringify(errorObj),\r\n\t\t\t\t\tcontentType: 'application/json; charset=utf-8',\r\n\t\t\t\t\theaders: { 'X-CSRF-TOKEN': header }\r\n\t\t\t\t});\r\n\t\t\t\t// Audit request\r\n\t\t\t\tlet auditObj = {\r\n\t\t\t\t\ttype: 'XHR-Error',\r\n\t\t\t\t\tmsg: msg\r\n\t\t\t\t};\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: 'api/webaudit',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: JSON.stringify(auditObj),\r\n\t\t\t\t\tcontentType: 'application/json; charset=utf-8',\r\n\t\t\t\t\theaders: { 'X-CSRF-TOKEN': header }\r\n\t\t\t\t});\r\n\t\t\t\t/* Llamamos a la funcion original */\r\n\t\t\t\terrorFn.apply(null, args);\r\n\t\t\t};\r\n\t\t\treturn $delegate;\r\n\t\t});\r\n\t})\r\n\r\n\t/* Configuracion de estados, HTTP e idiomas */\r\n\t.config(function ($stateProvider, $urlRouterProvider, $httpProvider, $translateProvider, httpRequestInterceptorCacheBusterProvider) {\r\n\t\t/* Configuracion de CSRF, cookie y nombre cabecera*/\r\n\t\t$httpProvider.defaults.xsrfCookieName = 'CSRF-TOKEN';\r\n\t\t$httpProvider.defaults.xsrfHeaderName = 'X-CSRF-TOKEN';\r\n\r\n\t\t// alternatively, register the interceptor via an anonymous factory\r\n\t\t$httpProvider.interceptors.push(function ($q, $log) {\r\n\t\t\treturn {\r\n\t\t\t\t'responseError': function (response) {\r\n\t\t\t\t\tif (window.location.href.indexOf('login') < 0) {\r\n\t\t\t\t\t\t$log.error(response.config.url +' - ' + response.status + ' ' + response.statusText + ': ' + response.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn $q.reject(response);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t/* Cache everything except rest api requests*/\r\n\t\thttpRequestInterceptorCacheBusterProvider.setMatchlist([/.*api.*/], true);\r\n\r\n\t\t$urlRouterProvider.otherwise(function ($injector, $location) {\r\n\t\t\tvar Principal = $injector.get('Principal');\r\n\t\t\tif (Principal.isAuthenticated()) {\r\n\t\t\t\t$location.url('/home');\r\n\t\t\t} else {\r\n\t\t\t\t$location.url('/login');\r\n\t\t\t}\r\n\t\t});\r\n\t\t$stateProvider.state('public', {\r\n\t\t\tabstract: true,\r\n\t\t\tviews: {\r\n\t\t\t\t'header@': {\r\n\t\t\t\t\ttemplateUrl: 'scripts/components/header/header.html'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tresolve: {\r\n\t\t\t\ttranslatePartialLoader: ['$translate', '$translatePartialLoader',\r\n\t\t\t\t\tfunction ($translate,\r\n\t\t\t\t\t\t$translatePartialLoader) {\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('global');\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('language');\r\n\t\t\t\t\t\treturn $translate.refresh();\r\n\t\t\t\t\t}]\r\n\t\t\t}\r\n\t\t}).state('site', {\r\n\t\t\tabstract: true,\r\n\t\t\tviews: {\r\n\t\t\t\t'header@': {\r\n\t\t\t\t\ttemplateUrl: 'scripts/components/header/header.html'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tresolve: {\r\n\t\t\t\tauthorize: ['Auth',\r\n\t\t\t\t\tfunction (Auth) {\r\n\t\t\t\t\t\treturn Auth.authorize();\r\n\t\t\t\t\t}],\r\n\t\t\t\ttranslatePartialLoader: ['$translate', '$translatePartialLoader',\r\n\t\t\t\t\tfunction ($translate,\r\n\t\t\t\t\t\t$translatePartialLoader) {\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('global');\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('language');\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('positions');\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('states');\r\n\t\t\t\t\t\treturn $translate.refresh();\r\n\t\t\t\t\t}]\r\n\t\t\t}\r\n\t\t}).state('main', {\r\n\t\t\tparent: 'site',\r\n\t\t\tname: 'main',\r\n\t\t\turl: '/',\r\n\t\t\tdata: { roles: [] },\r\n\t\t\tviews: {\r\n\t\t\t\t'content@': {\r\n\t\t\t\t\tcontroller: 'MainController'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tresolve: {\r\n\t\t\t\tmainTranslatePartialLoader: ['$translate', '$translatePartialLoader',\r\n\t\t\t\t\tfunction ($translate, $translatePartialLoader) {\r\n\t\t\t\t\t\t$translatePartialLoader.addPart('main');\r\n\t\t\t\t\t\treturn $translate.refresh();\r\n\t\t\t\t\t}]\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* Configuracion de angular-translate */\r\n\t\t$translateProvider.useLoader('$translatePartialLoader', {\r\n\t\t\turlTemplate: 'i18n/{part}/{lang}.json'\r\n\t\t});\r\n\t\t$translateProvider.preferredLanguage('es');\r\n\t\t$translateProvider.useCookieStorage();\r\n\r\n\t})\r\n\t/* Configuracion del locale dinamico */\r\n\t.config(function (tmhDynamicLocaleProvider) {\r\n\t\ttmhDynamicLocaleProvider\r\n\t\t\t.localeLocationPattern('bower_components/angular-i18n/angular-locale_{{locale}}.js');\r\n\t\ttmhDynamicLocaleProvider\r\n\t\t\t.useCookieStorage('NG_TRANSLATE_LANG_KEY');\r\n\t});"]}